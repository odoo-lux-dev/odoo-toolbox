@use "@/entries/devtools-panel/_variables";
@use "@/entries/devtools-panel/_mixins" as m;

.notification {
    display: flex;
    flex-direction: column;
    white-space: pre-wrap;
    padding: 0;
    border-radius: 6px;
    box-shadow: var(--devtools-shadow);
    background: var(--devtools-bg-primary);
    border: 1px solid var(--devtools-border);
    animation: bounceInRight 0.65s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    overflow: hidden;

    &.slide-out {
        animation: bounceOutRight 0.5s cubic-bezier(0.6, 0.04, 0.98, 0.335) forwards;
    }

    * {
        pointer-events: none;
    }

    .notification-close,
    .notification-action-button {
        @include m.focus-visible(rgba-from(var(--devtools-primary), 0.10));

        pointer-events: auto;
    }
}

.notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px 8px 16px;
}

.notification-type {
    display: flex;
    align-items: center;
    gap: 8px;
}

.notification-icon {
    font-size: 16px;
    flex-shrink: 0;
}

.notification-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--devtools-text-primary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.notification-body {
    padding: 8px 16px 12px 16px;
}

.notification-message {
    font-size: 14px;
    color: var(--devtools-text-primary);
    line-height: 1.4;
}

.notification-actions {
    margin-top: 12px;
    display: flex;
    gap: 8px;
    align-items: center;
}

.notification-action-button {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border: none;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    text-transform: none;

    .notification-action-icon {
        font-size: 14px;
        flex-shrink: 0;
    }

    .notification-action-label {
        line-height: 1;
    }

    &.primary {
        @include m.notification-action-button(var(--devtools-primary),
            var(--devtools-button-text),
            var(--devtools-primary-dark));
        @include m.focus-visible(rgba-from(var(--devtools-primary), 0.10));
    }

    &.primary-outline {
        @include m.notification-action-button-outline(var(--devtools-primary),
            var(--devtools-primary),
            var(--devtools-button-text));
        @include m.focus-visible(rgba-from(var(--devtools-primary), 0.10));
    }

    &.secondary {
        @include m.notification-action-button(var(--devtools-bg-secondary),
            var(--devtools-text-primary),
            var(--devtools-bg-tertiary),
            var(--devtools-border));
        @include m.focus-visible(rgba-from(var(--devtools-secondary), 0.10));
    }

    &.secondary-outline {
        @include m.notification-action-button-outline(var(--devtools-text-secondary),
            var(--devtools-bg-secondary),
            var(--devtools-text-primary));
        @include m.focus-visible(rgba-from(var(--devtools-secondary), 0.10));
    }

    &.success {
        @include m.notification-action-button(var(--devtools-success-strong), white, var(--devtools-success-strong-dark));
        @include m.focus-visible(rgba-from(var(--devtools-success-strong), 0.10));
    }

    &.success-outline {
        @include m.notification-action-button-outline(var(--devtools-success-strong), var(--devtools-success-strong), white);
        @include m.focus-visible(rgba-from(var(--devtools-success-strong), 0.10));
    }

    &.warning {
        @include m.notification-action-button(var(--devtools-warning-strong), white, var(--devtools-warning-strong-dark));
        @include m.focus-visible(rgba-from(var(--devtools-warning-strong), 0.10));
    }

    &.warning-outline {
        @include m.notification-action-button-outline(var(--devtools-warning-strong), var(--devtools-warning-strong), white);
        @include m.focus-visible(rgba-from(var(--devtools-warning-strong), 0.10));
    }

    &.danger {
        @include m.notification-action-button(var(--devtools-error-strong), white, var(--devtools-error-strong-dark));
        @include m.focus-visible(rgba-from(var(--devtools-error-strong), 0.10));
    }

    &.danger-outline {
        @include m.notification-action-button-outline(var(--devtools-error-strong), var(--devtools-error-strong), white);
        @include m.focus-visible(rgba-from(var(--devtools-error-strong), 0.10));
    }
}

.notification-progress {
    position: relative;
    height: 3px;
    background: var(--devtools-op-white-10);
    overflow: hidden;

    .notification-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, color-mix(in srgb, var(--devtools-primary) 85%, white), var(--devtools-primary));
        transition: width 50ms linear;
        border-radius: 0 2px 2px 0;
    }
}

.notification-close {
    @include m.icon-button(24px, 18px, 3px);
}

.notification-success {
    @include m.notification-variant(var(--devtools-success-strong), var(--devtools-success-strong-dark));
}

.notification-error {
    @include m.notification-variant(var(--devtools-error-strong), var(--devtools-error-strong-dark));
}

.notification-warning {
    @include m.notification-variant(var(--devtools-warning-strong), var(--devtools-warning-strong-dark));
}

.notification-info {
    @include m.notification-variant(var(--devtools-info-strong), var(--devtools-info-strong-dark));
}

@keyframes bounceOutRight {
    0% {
        transform: translateX(0);
        opacity: 1;
    }

    20% {
        transform: translateX(-10%);
        opacity: 1;
    }

    100% {
        transform: translateX(110%);
        opacity: 0;
    }
}

@keyframes bounceInRight {
    0% {
        transform: translateX(100%);
        opacity: 0;
    }

    50% {
        transform: translateX(-1.5%);
        opacity: 1;
    }

    75% {
        transform: translateX(0.5%);
    }

    100% {
        transform: translateX(0);
        opacity: 1;
    }
}